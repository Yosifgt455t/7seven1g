<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุญุฒูุฉ ุงูุฃูุนุงุจ ุงูุณุจุน</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="online-styles.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <!-- Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>

<body>

    <div id="app">
        <!-- Splash Screen -->
        <div id="splash-screen" class="screen active">
            <div class="splash-content">
                <h1 class="mega-title">ุญุฒูุฉ ุงูุฃูุนุงุจ ุงูุณุจุน</h1>
                <p class="subtitle">ุชุญุฏู ุงูุฐูุงุกุ ุงูุญุธุ ูุงูุฐุงูุฑุฉ</p>
                <div class="splash-buttons">
                    <button class="btn btn-primary btn-large" onclick="app.startApp()">ุงุจุฏุฃ ุงููุนุจ</button>
                    <button class="btn btn-danger btn-large" onclick="app.exitApp()">ุฎุฑูุฌ</button>
                </div>
            </div>
        </div>

        <!-- Main Menu -->
        <div id="main-menu" class="screen hidden">
            <h1>๐ฎ ูุงุฆูุฉ ุงูุฃูุนุงุจ</h1>
            <div class="games-grid">
                <button class="game-card" onclick="app.selectGame('misere')">
                    <h2>ุฅูุณ ุฃู ุงููุนููุณุฉ</h2>
                    <p>ูู ูููููู ุฎุทุงู ูุฎุณุฑ!</p>
                </button>
                <button class="game-card" onclick="app.selectGame('circular')">
                    <h2>ุฅูุณ ุฃู ุงูุฏุงุฆุฑูุฉ</h2>
                    <p>ููุญุฉ ุฏุงุฆุฑูุฉ ุบูุฑ ุชูููุฏูุฉ.</p>
                </button>
                <button class="game-card" onclick="app.selectGame('moving')">
                    <h2>ุฅูุณ ุฃู ุงููุชุญุฑูุฉ</h2>
                    <p>3 ูุทุน ููุทุ ุญุฑููุง ููููุฒ.</p>
                </button>
                <button class="game-card" onclick="app.selectGame('color')">
                    <h2>ุฅูุณ ุฃู ุจุงูุฃููุงู</h2>
                    <p>ุงุฌูุน ุฃุนูู ุงูููุงุท ููููุฒ.</p>
                </button>
                <button class="game-card" onclick="app.selectGame('snakes')">
                    <h2>ุงูุณูุงูู ูุงูุซุนุงุจูู</h2>
                    <p>ุณุจุงู ุงูุญุธ ุงููุตุบุฑ.</p>
                </button>
                <button class="game-card" onclick="app.selectGame('memory')">
                    <h2>ุงูุฐุงูุฑุฉ ุงููุงุชูุฉ</h2>
                    <p>ุงุฌูุน ุงูุฃุฒูุงุฌ ูุชุฐูุฑ ุงูุฃูุงูู.</p>
                </button>
                <button class="game-card" onclick="app.selectGame('ultimate')">
                    <h2>ุฅูุณ ุฃู ุงูุนููุงูุฉ</h2>
                    <p>9 ููุญุงุช ูู ููุญุฉ ูุงุญุฏุฉ.</p>
                </button>
            </div>
            <footer>ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ ููุณู ุญููู</footer>
        </div>

        <!-- Game Setup Screen -->
        <div id="game-setup" class="screen hidden">
            <h2 id="setup-title">ุฅุนุฏุงุฏ ุงููุนุจุฉ</h2>
            <div class="setup-options">
                <button class="btn btn-primary" onclick="app.startLocalGame()">ุถุฏ ูุงุนุจ ุขุฎุฑ (ูุญูู)</button>
                <button class="btn btn-secondary" onclick="app.showAiDifficulty()">ุถุฏ ุงูุฐูุงุก ุงูุงุตุทูุงุนู</button>
                <button class="btn btn-accent" onclick="app.showOnlineSetup()">ูุนุจ ุฃูููุงูู</button>
            </div>

            <div id="ai-difficulty" class="hidden">
                <h3>ุงุฎุชุฑ ุงูุตุนูุจุฉ</h3>
                <button class="btn" onclick="app.startAiGame('easy')">ุณูู</button>
                <button class="btn" onclick="app.startAiGame('medium')">ูุชูุณุท</button>
                <button class="btn" onclick="app.startAiGame('hard')">ุตุนุจ</button>
                <button class="btn btn-back" onclick="app.resetSetup()">ุฑุฌูุน ููุงุฎุชูุงุฑ</button>
            </div>

            <div id="online-setup" class="hidden">
                <h3>(ูุฑูุจุงู)ุงููุนุจ ุฃูููุงูู</h3>

                <div class="online-section">
                    <h4>ุฅูุดุงุก ุบุฑูุฉ ุฌุฏูุฏุฉ</h4>
                    <input type="text" id="p1-name" placeholder="ุงุณูู (ุงููุถูู)" class="input-field">
                    <button class="btn btn-primary" onclick="app.createRoom()">ุฅูุดุงุก ุบุฑูุฉ</button>
                </div>

                <div class="divider">ุฃู</div>

                <div class="online-section">
                    <h4>ุงูุถูุงู ูุบุฑูุฉ</h4>
                    <input type="text" id="p2-name" placeholder="ุงุณูู (ุงูุถูู)" class="input-field">
                    <input type="text" id="room-code-input" placeholder="ุฑูุฒ ุงูุบุฑูุฉ" class="input-field">
                    <button class="btn btn-secondary" onclick="app.joinRoom()">ุงูุถูุงู</button>
                </div>

                <button class="btn btn-back" onclick="app.resetSetup()">ุฑุฌูุน ููุงุฎุชูุงุฑ</button>
            </div>

            <button id="main-back-btn" class="btn btn-back" onclick="app.goBack()">ุฑุฌูุน ูููุงุฆูุฉ</button>
        </div>

        <!-- Active Game Screen -->
        <div id="game-screen" class="screen hidden">
            <header>
                <div class="header-controls">
                    <button class="btn-small btn-danger" onclick="app.quitGame()">ุฎุฑูุฌ</button>
                    <button id="restart-btn" class="btn-small btn-action" onclick="app.restartGame()">ุฅุนุงุฏุฉ</button>
                </div>
                <h3 id="game-title">ุนููุงู ุงููุนุจุฉ</h3>
                <div id="game-status">ุงูุฏูุฑ: X</div>
            </header>

            <div id="game-container">
                <!-- Game board will be injected here -->
            </div>

            <!-- "How to Play" Overlay (shown first time) -->
            <div id="how-to-play" class="modal hidden">
                <div class="modal-content">
                    <h3>ููููุฉ ุงููุนุจ</h3>
                    <p id="rules-text">...</p>
                    <button class="btn" onclick="app.closeRules()">ูููุช</button>
                </div>
            </div>

            <!-- Online Waiting Modal -->
            <div id="waiting-modal" class="modal hidden">
                <div class="modal-content">
                    <h3>ุจุงูุชุธุงุฑ ุงูููุงูุณ...</h3>
                    <p>ุดุงุฑู ุฑูุฒ ุงูุบุฑูุฉ ูุน ุตุฏููู:</p>
                    <div id="room-code-display" class="code-box">---</div>
                    <button class="btn btn-copy" onclick="app.copyRoomCode()">ูุณุฎ ุงูุฑูุฒ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/supabase-client.js"></script>
    <script src="js/games/misere-ttt.js"></script>
    <script src="js/games/circular-ttt.js"></script>
    <script src="js/games/moving-ttt.js"></script>
    <script src="js/games/color-ttt.js"></script>
    <script src="js/games/snakes-ladders.js"></script>
    <script src="js/games/memory-duel.js"></script>
    <script src="js/games/ultimate-ttt.js"></script>
    <script src="js/main.js"></script>
</body>

</html>